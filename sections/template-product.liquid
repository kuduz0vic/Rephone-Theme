<script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>

<p class="size-metafield" style="display: none;">{{product.metafields.custom.product_size}}</p>
<p class="color-metafield" style="display: none;">{{product.metafields.custom.product_color}}</p>
{% assign selected_variant = product.selected_or_first_available_variant %}
<style>
  .variant-a {
    display: block;
  }

  .variant-b {
    display: none;
  }

  label {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 40px;
    width: 40px;
    border-radius: 8px;
    border: 1px solid #e5e5e5;
    position: relative;
  }

  label input {
    display: none;
  }

  label span {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 40px;
    width: 40px;
    border-radius: 8px;
    border: 1px solid #e5e5e5;
    font-size: 12px;
    line-height: 22px;
    margin: 5px 0;
  }

  input:checked + span {
    color: white;
  }

  input:checked label span {
    color: white;
  }
</style>


{% form 'product', product %}
  <div class="container product-details">
    <section class="breadcrumbs">
      <div class="item-parent col-12 col-lg-6">
        <ul class="item-parent">
          <li class="item">
            <a href="">
              <p>Home</p>
            </a>
          </li>
          <li class="item">
            <a href="{{product.url}}">
              <p>{{product.title}}</p>
            </a>
          </li>
        </ul>
      </div>
    </section>
    <section class="brands d-md-none mobile-line-after" style="display: none;">
      <a href="https://www.thuiswinkel.org/leden/rephone/certificaat" target="_blank">
        <div class="img"></div>
        <div class="img"></div>
        <div class="img"></div>
      </a>
    </section>
    <div
      class="row d-flex flex-column-reverse flex-lg-row"
      itemscope
      itemtype="http://schema.org/Product">
      <section class="left-sidebar col-12 col-lg-4">
        <div class="inner">
          <div class="product d-none d-lg-block">
            <div class="swiper mySwiper2">
              <div class="swiper-wrapper">
                {% for media in product.media %}
                  <div class="swiper-slide mySwiper2-slide" data-value="{{media.alt}}" alt="{{media.alt}}">
                    <img
                      itemprop="image"
                      src="{{ media  | img_url: 'master' }}"
                      class="headthumb"
                      title="{{ product.title }}"
                      alt="{{ product.title }}"
                      style="width: 288px ;" />
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
          <div thumbsSlider="" class="swiper mySwiper3 product-images d-none d-lg-block">
            <div class="swiper-wrapper item-parent">
              {% for media in product.media %}
                <div class="swiper-slide item mySwiper3-slide" data-value="{{media.alt}}" style="max-width: 55px;" alt="{{media.alt}}">
                  <img
                    src="{{ media | image_url }}"
                    class="thumb"
                    title="{{ product.title }}"
                    alt="{{ product.title }}"
                    style="height: 50px;" />
                </div>
              {% endfor %}
            </div>
          </div>









          

          <div class="unboxing" style="display: none;">
            <h4>Unboxing Rephone</h4>
            <div class="img"></div>
          </div>
          <div class="included d-lg-none mb-0">
            <h4 class="mb-3">Standaard meegeleverd</h4>
            <div class="item-parent">
              <div class="row">
                {% for block in section.blocks %}
                  {% case block.type %}
                    {% when 'addition' %}
                    <div class="item col-6 mb-3">
                      <div class="inner">
                        <img
                          src="{{block.settings.addition-image | img_url: 'master'}}"
                          class="img"
                          alt="Apple Earpods"
                          style="width: 50px;" />
                      </div>
                    </div>
                  {% endcase %}
                {% endfor %}
              </div>
            </div>
          </div>
          <div class="text-content d-lg-none mt-3">
            <div class="text">
              <p>{{ product.description }}</p>
            </div>
          </div>
          <div class="lookouts-accordion d-lg-none mt-4">
            <div id="accordion">
              <div class="card" style="display: none;">
                <div class="card-header" id="headingOne">
                  <h5 class="mb-0">
                    <button
                      class="btn"
                      data-toggle="collapse"
                      data-target="#collapseOne"
                      aria-expanded="true"
                      aria-controls="collapseOne">
                      <h4>Waar moet ik op letten?</h4>
                      <i class="fal fa-chevron-down"></i>
                    </button>
                  </h5>
                </div>
                <div
                  id="collapseOne"
                  class="collapse show"
                  aria-labelledby="headingOne"
                  data-parent="#accordion">
                  <div class="card-body">
                    <p>Lorem ipsum dolor sit amet.</p>
                  </div>
                </div>
              </div>
              <div class="card">
                <div class="card-header" id="headingTwo">
                  <h5 class="mb-0">
                    <button
                      class="btn"
                      data-toggle="collapse"
                      data-target="#collapseTwo"
                      aria-expanded="true"
                      aria-controls="collapseTwo">
                      <h4>Rephone op TV</h4>
                      <i class="fal fa-chevron-down"></i>
                    </button>
                  </h5>
                </div>
                <div
                  id="collapseTwo"
                  class="collapse"
                  aria-labelledby="headingTwo"
                  data-parent="#accordion">
                  <div class="card-body">
                    <iframe
                      src="https://www.youtube.com/embed/fDWeSPuKdu0?enablejsapi=1&amp;origin=https%3A%2F%2Fwww.rephone.nl"
                      allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                      allowfullscreen=""
                      data-gtm-yt-inspected-8="true"
                      id="807589892"
                      data-gtm-yt-inspected-8312312_46="true"
                      title="Rephone item Doe maar Duurzaam S11E12 RTLZ 23 december 2018"
                      width="375"
                      height="210"
                      frameborder="0"></iframe>
                  </div>
                </div>
              </div>
              <div class="card" style="display: none;">
                <div class="card-header" id="headingThree">
                  <h5 class="mb-0">
                    <button
                      class="btn"
                      data-toggle="collapse"
                      data-target="#collapseThree"
                      aria-expanded="true"
                      aria-controls="collapseThree">
                      <h4>Wat zijn de specs</h4>
                      <i class="fal fa-chevron-down"></i>
                    </button>
                  </h5>
                </div>
                <div
                  id="collapseThree"
                  class="collapse"
                  aria-labelledby="headingThree"
                  data-parent="#accordion">
                  <div class="card-body">
                    <p>Lorem ipsum dolor sit amet.</p>
                  </div>
                </div>
              </div>
              <div class="card">
                <div class="card-header" id="headingFour">
                  <h5 class="mb-0">
                    <button
                      class="btn"
                      data-toggle="collapse"
                      data-target="#collapseFour"
                      aria-expanded="true"
                      aria-controls="collapseFour">
                      <h4>Reviews</h4>
                      <i class="fal fa-chevron-down"></i>
                    </button>
                  </h5>
                </div>
                <div
                  id="collapseFour"
                  class="collapse"
                  aria-labelledby="headingFour"
                  data-parent="#accordion">
                  <div class="card-body">
                    {% for block in section.blocks %}
                      {% case block.type %}
                        {% when 'accordion-reviews' %}
                        <div class="review">
                          <div class="title">
                            <p>{{ block.settings.person-name }} | {{ block.settings.person-city }}</p>
                          </div>
                          <div class="star-ratings-css blue-stars">
                            <div class="star-ratings-css-top" style="width: 100%">
                              <span>★</span>
                              <span>★</span>
                              <span>★</span>
                              <span>★</span>
                              <span>★</span>
                            </div>
                            <div class="star-ratings-css-bottom">
                              <span>★</span>
                              <span>★</span>
                              <span>★</span>
                              <span>★</span>
                              <span>★</span>
                            </div>
                          </div>
                          <div class="text">
                            {{ block.settings.person-description }}
                          </div>
                        </div>
                      {% endcase %}
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="unboxing" id="fixedOnScroll">
            <div class="why-buy-here mt-4">
              <div class="inner">
                <h4>Waarom bij ons kopen</h4>
                <div class="check-marks green">
                  {% for block in section.blocks %}
                    {% case block.type %}
                      {% when 'additional-lines' %}
                      <div class="check-mark">
                        <i class="fal fa-check-circle"></i>
                        <p>
                          <a href="{{block.settings.line-link}}">{{ block.settings.line-text }}</a>
                        </p>
                      </div>
                    {% endcase %}
                  {% endfor %}
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="main-content mt-lg-0 col-12 col-lg-8" x-data="app()">
        <div class="inner">
          <div class="options-info">
            {% for block in section.blocks %}
              {% case block.type %}
                {% when 'title' %}
                <div class="title">
                  <h1 itemprop="name" style="font-size: 40px; margin:0;">{{ product.title }}</h1>
                  <h3>{{ block.settings.product-info-text }}</h3>
                  <h4>Volledig functioneel & simlockvrij</h4>
                </div>
              {% endcase %}
            {% endfor %}
            <div style="display: none;" itemprop="description">{{ description }}</div>
            <div
              itemprop="offers"
              itemscope
              itemtype="http://schema.org/Offer"
              style="display: none;">
              <span itemprop="priceCurrency" content="EUR">&euro;</span>
              <span itemprop="price" content="{{ rs_price }}">{{ price }}</span>
              {% if quantity > 0 %}
                <link itemprop="availability" href="http://schema.org/InStock" />
              {% else %}
                <link itemprop="availability" href="http://schema.org/OutOfStock" />
              {% endif %}
              <span itemprop="priceValidUntil">2030-01-01</span>
              <span itemprop="url">{{ href }}</span>
            </div>


            <div class="product d-lg-none">
              <div class="row">
                <div class="col-9 thumbnail-big">
                  <div class="swiper mySwiper4 inner">
                    <div class="swiper-wrapper">
                      {% for media in product.media %}
                        <div class="swiper-slide mySwiper4-slide" data-value="{{media.alt}}" alt="{{media.alt}}">
                          <img
                            src="{{ media | img_url: 'master'}}"
                            class="headthumb"
                            title="{{ product.title }}"
                            alt="{{ product.title }}"
                            style="height: 190px;">
                        </div>
                      {% endfor %}
                    </div>
                  </div>
                </div>
                <div thumbsSlider="" class="swiper mySwiper5">
                  <div class="swiper-wrapper col-2 thumbnail-small">
                    {% for media in product.media %}
                      <div class="swiper-slide item mySwiper5-slide" data-value="{{media.alt}}" alt="{{media.alt}}" style="max-width: 55px;">
                        <div class="inner">
                          <img
                            src="{{ media | img_url}}"
                            class="thumb"
                            title="{{ product.title }}"
                            alt="{{ product.title }}"
                            style="height: 38px;">
                        </div>
                      </div>
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>




            {% if product.available == true %}
              {% if product.variants.size > 1 %}
                <div class="options mobile-line-after mobile-line-before choice-container" x-data="{ showSizePopup: false }">
                  <template x-for="option of Object.keys(productOptions)">
                    <div
                      class="col-12 col-lg-8 color-options"
                      :class="`swatch-${optionName}`"
                      x-data="{ optionName: option }">
                      <h4 x-text="optionName"></h4>
                      <div class="row">
                        <template x-for="value of productOptions[option]">
                          <div class="color col-2 col-lg-2 color-container" :class="`${optionName === 'Kleur' ? 'color-swatch' : ''} ${optionName === 'Opslag' ? 'size-swatch' : ''}`" style="max-width: 71.5px;" id="swatchesjs">
                            
                          <input 
                            class="color-input" 
                            type="radio" 
                            :name="option" 
                            :value="value"
                            @click="[handleClick(), handleClick2()]"
                            style="opacity:0;position:absolute;z-index:-1;z-index: 1000; width: 60%; height: 100%; left: 15px;">
                            <label
                              style="position:relative"
                              id="w-node-_045e9f5f-eff7-ef5b-527f-acc17b273d01-ed85433a"
                              class="variant-size-radio w-radio"
                              :class="`swatch-${value.toLowerCase()}`">
                              <div class="bg-fix w-form-formradioinput w-form-formradioinput--inputType-custom w-radio-input cursor-pointer size-radio-button" :style="currentOptions[option] === value ? 'border:2px solid var(--section-bg-color-2);color:#fbf3eb;background-color:#514135': 'background-color:#fbf3eb;color:#514135'"></div>
                              <input
                              id="radio"  class="size-input"
                              type="radio"
                              :name="option"
                              :value="value"
                              style="opacity:0;position:absolute;z-index:-1">
                              <span
                                :style="currentOptions[option] === value ? 'color:#fff';"
                                class="size-radio-button-label swatch-text-inside w-form-label"
                                for="radio"
                                x-text="value"></span>
                            </label>
                            <span
                              :style="currentOptions[option] === value ?"
                              class="size-radio-button-label swatch-text-outside w-form-label"
                              for="radio"
                              x-text="value"></span>
                          </div>

                        </template>
                      </div>
                    </div>

                    <div style="clear: both; width: 100%;"></div>
                  </template>
                </div>

              {% endif %}
            {% endif %}


            {% assign tomorrow = 'now' | date: '%s' | plus: 86400 %}


            <div class="condition mt-5 mt-lg-0">
              <div class="cart">
                <div class="title">
                  <div class="row">
                    <div class="col-4 col-md-6">
                      <h4>Behuizing</h4>
                    </div>
                    <div class="col-8 col-md-6">
                      <div
                        class="blue"
                        data-toggle="modal"
                        data-target="#productConditions">
                        <p>Meer weten over de behuizingconditie?</p>
                      </div>
                    </div>
                  </div>
                </div>
                <style>
                  .btn-cart {
                    width: 100% !important;
                    cursor: pointer;
                  }

                  @media screen and (max-width: 991px) {
                    .btn-cart {
                      font-size: 11px;
                    }
                  }
                </style>

                {% for variant in product.variants %}
                  <div class="cart-item mobile-line-after mobile-line-before" {% if option_value.quantity == 0 %}style="opacity:100%;"{% endif %}>
                    <div class="row no-gutters">
                      <div class="col-4 col-md-3">
                        <p>
                        {% if variant.title contains 'Als nieuw' %}A Grade{% endif %}
                        {% if variant.title contains 'Lichte gebruikssporen' %}B Grade{% endif %}
                        {% if variant.title contains 'Zichtbare gebruikssporen' %}C Grade{% endif %}
                        {% if variant.title contains 'Nieuw' %}Nieuw{% endif %}
                        <br>
                        <span>
                          {% if variant.title contains 'Als nieuw' %}Als nieuw{% endif %}
                          {% if variant.title contains 'Lichte gebruikssporen' %}Licht gebruikt{% endif %}
                          {% if variant.title contains 'Zichtbare gebruikssporen' %}Zichtbaar <br> gebruikt{% endif %}
                          {% if variant.title contains 'Nieuw' %}Gloednieuw{% endif %}
                        </span>
                      </p>
                      <p class="variant-title" style="display: none;">{{variant.title}}</p>
                    </div>
                    <div class="col-4 col-md-3 price" id="price-{{ section.id }}">
                      <p class="blue">{{ variant.price | money_without_trailing_zeros | remove: '€' }},-</p>
                    </div>

                    {% if variant.inventory_quantity == 0 %}
                      <div class="stock no-stock col-3 d-none d-md-flex">
                        <p>Uitverkocht</p>
                        <p>Ontvang een e-mail bij voorraad</p>
                      </div>
                    {% elsif variant.inventory_quantity < 200 %}
                      {% assign tomorrow = 'now' | date: '%s' | plus: 86400 %} {%
   assign tomorrow_en = tomorrow | date: '%A' %}
                      <div class="stock in-stock col-3 d-none d-md-flex">
                        <p>In voorraad</p>
                        <p>Voor 22:30 besteld,
                          {% case tomorrow_en %}
                            {% when 'Monday' %} maandag
                            {% when 'Tuesday' %} dinsdag
                            {% when 'Wednesday' %} woensdag
                            {% when 'Thursday' %} donderdag
                            {% when 'Friday' %} vrijdag
                            {% when 'Saturday' %} zaterdag
                            {% when 'Sunday' %} zondag
                          {% endcase %}
                          in huis</p>
                      </div>

                    {% elsif variant.inventory_quantity == 200 %}
                      <div class="stock in-stock col-3 d-none d-md-flex">
                        <p>4 stuks in voorraad</p>
                        <p>{{ supplier_delivery }}</p>
                      </div>
                    {% elsif variant.inventory_quantity == 300 %}
                      <div class="stock in-stock col-3 d-none d-md-flex">
                        <p>4 stuks in voorraad</p>
                        <p>{{ supplier_minpex_delivery }}</p>
                      </div>
                    {% endif %}
                    <div class="col-4 col-md-3 d-flex justify-content-end">
                      <!-- <div class="btn-cart" data-toggle="modal" data-target="#addToCartModal"><i class="fal fa-shopping-cart"></i></div> -->

                      {% if variant.inventory_quantity == 0 %}
                        <div
                          class="btn-cart stockemail"
                          data-toggle="modal"
                          data-product-option="option[{{ variant.product_option_id }}]"
                          data-product-option-value-id="{{ variant.product_option_value_id }}"
                          data-product-option-value-name="{{ variant.name }}"
                          data-product-id="{{ product_id }}"
                          data-product-option-value-price="{{ variant.price }}"
                          data-option-value-id="{{ variant.option_value_id }}"
                          data-target="#stockemail"
                          style="background:  #29a7bf; border-bottom: #29a7bf;">
                          <i class="fal fa-envelope"></i>&nbsp;
                          E-mail mij
                        </div>
                      {% else %}
                        <a id="add-to-cart-button"
                          class="btn-cart addtocart"
                          href="/cart/add?id={{ variant.id }}"
                          type="submit"
                          data-ajax-cart-request-button>
                          <i class="fal fa-shopping-cart"></i>&nbsp;Toevoegen
                        </a>
                      {% endif %}
                    </div>

                  </div>


                  <div class="row no-gutters mobile">
                    {% if variant.inventory_quantity == 0 %}
                      <div class="stock no-stock col-12 d-none">
                        <p>Uitverkocht ontvang een e-mail bij voorraad</p>
                      </div>
                    {% elsif variant.inventory_quantity <= 200 %}
                      {% assign tomorrow = 'now' | date: '%s' | plus: 86400 %} {%
   assign tomorrow_en = tomorrow | date: '%A' %}
                      <div class="stock in-stock col-12 d-none">
                        <p>{{ variant.inventory_quantity }} stuks in voorraad voor 22:30 besteld,
                          {% case tomorrow_en %}
                            {% when 'Monday' %} maandag
                            {% when 'Tuesday' %} dinsdag
                            {% when 'Wednesday' %} woensdag
                            {% when 'Thursday' %} donderdag
                            {% when 'Friday' %} vrijdag
                            {% when 'Saturday' %} zaterdag
                            {% when 'Sunday' %} zondag
                          {% endcase %}
                          in huis</p>
                      </div>
                    {% elsif variant.inventory_quantity == 200 %}
                      <div class="stock in-stock col-12 d-none">
                        <p>In voorraad bij leverancier, {{ supplier_delivery }}</p>
                      </div>
                    {% elsif variant.inventory_quantity == 300 %}
                      <div class="stock in-stock col-12 d-none">
                        <p>In voorraad bij leverancier, {{ supplier_minpex_delivery }}</p>
                      </div>
                    {% else %}
                      <div class="stock in-stock col-12 d-none">
                        <p>Onbekend aantal stuks in voorraad</p>
                      </div>
                    {% endif %}
                  </div>

                </div>
              {% endfor %}
            </div>
          </div>



          <p>* Al onze aparaten zijn ingekocht van Nederlandse consumenten waardoor marge BTW van toepassing is</p>
        </div>

        {% if name_split.type != '' %}
          <div class="included d-none d-lg-block">
            <h4>Wat zit er nog meer in de doos?</h4>
            <div class="item-parent">
              {% for block in section.blocks %}
                {% case block.type %}
                  {% when 'addition' %}
                  <div class="item">
                    <img
                      src="{{block.settings.addition-image | img_url: 'master'}}"
                      alt="Simpin"
                      class="img" />
                  </div>
                {% endcase %}
              {% endfor %}
            </div>
          </div>
        {% else %}
          <p class="blue" style="font-size: 40px; font-weight: bold; margin-bottom: 20px;">{{ price }}</p>
          <a
            class="btn-cart btn-green addtocart"
            data-product-id="{{ product_id }}"
            style="color: #fff;">Voeg toe aan
            winkelwagen</a>
        {% endif %}
        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'description' %}
            <div class="text-content d-none d-lg-block">
              <div class="text">
                <p>{{ product.description }}</p>
              </div>
            </div>
          {% endcase %}
        {% endfor %}
        <div class="lookouts d-none d-lg-block" style="display: none!important;">
          <h3>Waar moet ik op letten?</h3>
          <div class="row">
            <div class="col-6">
              <div class="check-marks pros">
                <div class="check-mark">
                  <i class="fal fa-check-circle"></i>
                  <p>Ontgrendel razendsnel jouw telefoon met je gezicht (Face ID)</p>
                </div>
                <div class="check-mark">
                  <i class="fal fa-check-circle"></i>
                  <p>Maak professionele foto�s en video�s met twee 12-megapixel camera�s</p>
                </div>
                <div class="check-mark">
                  <i class="fal fa-check-circle"></i>
                  <p>Geen kabel bij de hand? Je kunt de iPhone X ook draadloos opladen</p>
                </div>
                <div class="check-mark">
                  <i class="fal fa-check-circle"></i>
                  <p>De nieuwe A11-processor maakt de iPhone X krachtiger en energiezuiniger dan andere iPhones</p>
                </div>
              </div>
            </div>
            <div class="col-6">
              <div class="check-marks cons">
                <div class="check-mark">
                  <i class="fal fa-minus-circle"></i>
                  <p>Als je een voorkeur hebt voor touch ID, dan kan Face ID even wennen zijn</p>
                </div>
                <div class="check-mark">
                  <i class="fal fa-minus-circle"></i>
                  <p>De iPhone X heeft geen hoofdtelefoon aansluiting (headphone jack)</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="specs d-none d-lg-block" style="display: none!important;">
          <h3>Wat zijn de specs?</h3>

          <div class="spec">
            <div class="row no-gutters">
              <p class="col-6">Processor</p>
              <p class="col-6">Apple A11 Bionic</p>
            </div>
            <div class="row no-gutters">
              <p class="col-6">Kleur</p>
              <p class="col-6">Zwart / Space Grey</p>
            </div>
            <div class="row no-gutters">
              <p class="col-6">Geheugen</p>
              <p class="col-6">64gb</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="right-sidebar col-12 col-lg-3 d-none d-lg-block" style="display: none!important;">
      <div class="inner">
        <div class="why-buy-here" style="display:none;">
          <h4>Waarom bij ons kopen</h4>
          <div class="check-marks">
            {% for block in section.blocks %}
              {% case block.type %}
                {% when 'additional-lines' %}
                <div class="check-mark">
                  <i class="fal fa-check-circle"></i>
                  <p>
                    <a href="garantie/">Twee jaar garantie op je refurbished apparaat</a>
                  </p>
                </div>
              {% endcase %}
            {% endfor %}
          </div>
        </div>

        <a
          href="https://www.thuiswinkel.org/leden/rephone/certificaat"
          target="_blank"
          class="brands d-none d-lg-flex">
          <div class="img"></div>
          <div class="img"></div>
          <div class="img"></div>
        </a>

        <div class="questions d-none d-lg-block">
          <div class="row ask">
            <div class="col-8">
              <h3>Vragen?</h3>
            </div>
          </div>
          <div class="row mt-1 mb-2">
            <div class="col-12 contact">
              <div class="call">
                <i class="far fa-phone"></i>
                <p>
                  <a href="tel:085 1301 646" onclick="ga('send', 'event', { eventCategory: 'klik op telnr', eventAction: 'bellen', eventLabel: 'contact'});">085
                    1301 646</a>
                </p>
              </div>
            </div>
          </div>
          <div class="openings-hours">
            <div class="item">
              <div class="row no-gutters">
                <p class="col-12">maandag t/m vrijdag: <br>8:00 - 18:00</p>
              </div>
            </div>
          </div>
        </div>

        <div class="reviews d-none d-lg-block">
          <h4 class="mb-3">Reviews over dit product</h4>
          {% for review in kiyoh_reviews %}
            <div class="review">
              <div class="title">
                <p>{{ review.customer_name }} | {{ review.customer_place }}</p>
              </div>
              <div class="star-ratings-css blue-stars">
                <div class="star-ratings-css-top" style="width: {{ review.percentage }}%">
                  <span>&starf;</span>
                  <span>&starf;</span>
                  <span>&starf;</span>
                  <span>&starf;</span>
                  <span>&starf;</span>
                </div>
                <div class="star-ratings-css-bottom">
                  <span>&starf;</span>
                  <span>&starf;</span>
                  <span>&starf;</span>
                  <span>&starf;</span>
                  <span>&starf;</span>
                </div>
              </div>
              <div class="text">
                <p>{{ review.positive }}</p>
              </div>
            </div>
          {% endfor %}


          <a
            href="https://www.kiyoh.nl/rephone/"
            target="_blank"
            rel="nofollow"
            class="blue-underline">
            <p>Lees alle reviews</p>
            <i class="far fa-arrow-right"></i>
          </a>
        </div>

        <div class="trade-old-phone d-none d-lg-block">
          <h4>Oude iPhone inruilen?</h4>
          <p>
            Oude iPhone waar je nog geld voor kan krijgen? Lever hem bij ons in en ontvang binnen 24 uur je geld!
          </p>

          <a href="inruilen/" class="btn-green">Ruil je iPhone in</a>
        </div>
      </div>
    </section>
  </div>
{% endform %}

<!-- Modal Product condities-->
<div
  class="modal fade productConditions"
  id="productConditions"
  tabindex="-1"
  role="dialog"
  aria-labelledby="productConditions"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Behuizingconditie</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="inner">

          <div class="text">
            <div class="title">
              <h3>Kwaliteitscontrole</h3>
            </div>
            <p>
              Al onze iPhones zijn volledig functioneel. We hebben alle onderdelen gecontroleerd of deze nog werken en
              van de juiste kwaliteit zijn. Enkel in de behuizing zit een verschil.
              <a href="kwaliteitscontrole/">Lees hier alles over de kwaliteitscontrole.</a>
            </p>
          </div>
          <div class="text">
            <div class="title">
              <h3>A Grade</h3>
            </div>
            <p>
              Een A Grade iPhone ziet er uit alsof deze vrijwel niet gebruikt is. Het scherm is helemaal krasvrij en ook
              op de achterkant zijn geen krassen te zien.
            </p>
          </div>

          <div class="text">
            <div class="title">
              <h3>B Grade</h3>
            </div>
            <p>
              Een B Grade iPhone ziet er ook bijna ongebruikt uit. Het scherm kan enkele lichte krasjes bevatten, op de
              achterkant kunnen een paar kleine gebruikssporen te zien zijn. Het hele apparaat is gewoon intact en werkt
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    even goed als een A Grade.
            </p>
          </div>

          <div class="text">
            <div class="title">
              <h3>C Grade</h3>
            </div>
            <p>
              Een C Grade iPhone kun je zien als een gebruikte iPhone. Vaak zijn deze apparaten langer dan een jaar
              gebruikt door de vorige eigenaar en dit kun je ook zien aan de beschadigingen. Uiteraard ziet het scherm
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    er wel helemaal goed uit, er zitten geen barsten etc in. Op de achterkant is wel duidelijk te zien dat het
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    apparaat gebruikt is, denk bijvoorbeeld aan krassen of deukjes. Het hele apparaat is wel intact en werkt
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    even goed als een A of B Grade.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<!-- Modal Stock email -->
<div
  class="modal fade stockemail"
  id="stockemail"
  tabindex="-1"
  role="dialog"
  aria-labelledby="stockemail"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Ontvang een e-mail bij voorraad</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="inner">
          <form id="stockalert">
            <input
              type="hidden"
              class="stockemailinfo"
              name="product_option_value_id" />
            <input
              type="hidden"
              class="stockemailinfo"
              name="product_id" />
            Dit model is tijdelijk uitverkocht.<br/> Ontvang een e-mailbericht zodra dit product weer leverbaar is.
            <input
              type="email"
              id="stockemail"
              name="email"
              class="form-control"
              style="margin: 20px 0px;" />

            <input
              type="submit"
              id="stockalertsubmit"
              class="btn-green"
              style="margin: 20px 0px; border:none; width: 100%; cursor:pointer;"
              value="Houd mij op de hoogte" />
            <a
              data-product-option=""
              data-product-option-value-id=""
              data-product-option-value-name=""
              data-product-option-value-price=""
              data-product-id=""
              class="blue-underline addtocartlink addtocart"
              style="display: block; text-align: center; cursor:pointer;">Of product bestellen met langere levertijd</a>

          </form>


        </div>
      </div>
    </div>
  </div>
</div>

<input
  type="hidden"
  name="product_id"
  value="{{ product_id }}" />


<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>




<script>
  $(document).ready(function() {
    var size = $('.size-metafield').text();
    var color = $('.color-metafield').text();
    $('.cart-item.mobile-line-after.mobile-line-before').each(function() {
        var variantTitle = $(this).find('.variant-title').text().toLowerCase();
        if(!variantTitle.includes(size.toLowerCase()) || !variantTitle.includes(color.toLowerCase())) {
            $(this).hide();
        }
    });
    $('.size-swatch').click(function() {
        size = $(this).find('.swatch-text-outside').text();
        $('.cart-item.mobile-line-after.mobile-line-before').show();
        $('.cart-item.mobile-line-after.mobile-line-before').each(function() {
            var variantTitle = $(this).find('.variant-title').text().toLowerCase();
            if(!variantTitle.includes(size.toLowerCase()) || !variantTitle.includes(color.toLowerCase())) {
                $(this).hide();
            }
        });
    });
    $('.color-swatch').click(function() {
        color = $(this).find('.swatch-text-inside').text();
        $('.cart-item.mobile-line-after.mobile-line-before').show();
        $('.cart-item.mobile-line-after.mobile-line-before').each(function() {
            var variantTitle = $(this).find('.variant-title').text().toLowerCase();
            if(!variantTitle.includes(size.toLowerCase()) || !variantTitle.includes(color.toLowerCase())) {
                $(this).hide();
            }
        });
    });
});
</script>


<script>
  $(document).ready(function() {
    var sizeMetafield = $('.size-metafield').text();
    var colorMetafield = $('.color-metafield').text();

    // On page load, add active class to preselected swatches
    $('.color-swatch .swatch-text-outside').each(function() {
        if($(this).text() == colorMetafield) {
          $(this).closest('.variant-size-radio').addClass('color-active');
        }
    });
    
    $('.size-swatch .swatch-text-inside').each(function() {
        if($(this).text() == sizeMetafield) {
            $(this).addClass('size-active');
        }
    });

    $('.swatch-text-outside').filter(function() {
      return $(this).text() === colorMetafield;
  }).prev().addClass('color-active');

    // Handle active state on swatch click
    $('.color-swatch input').click(function() {
        $('.color-swatch label').removeClass('color-active');
        $(this).closest('.variant-size-radio').addClass('color-active');
    });
    $('.size-swatch input').click(function() {
        $('.size-swatch span').removeClass('size-active');
        $(this).closest('span').addClass('size-active');
    });
});
</script>

<script>

var originalSlides = [];
var originalThumbs = [];

  // Save the original slides if they haven't been saved yet
  if (originalSlides.length === 0) {
    let slides = document.querySelectorAll('.mySwiper2-slide');
    for (let slide of slides) {
      originalSlides.push(slide.cloneNode(true));
    }
  }

  if (originalThumbs.length === 0) {
    let thumbs = document.querySelectorAll('.mySwiper3-slide');
    for (let thumb of thumbs) {
      originalThumbs.push(thumb.cloneNode(true));
    }
  }


  var colorField = document.querySelector(".color-metafield");
  var color = colorField.innerText;
  
  var mySwiper2 = document.querySelector(".mySwiper2");
  var mySwiper2Slides = mySwiper2.querySelectorAll(".swiper-slide");
  
  for (var i = 0; i < mySwiper2Slides.length; i++) {
    var slide = mySwiper2Slides[i];
    if (slide.getAttribute("data-value") != color) {
      slide.parentElement.removeChild(slide);
    }
  }

  var mySwiper3 = document.querySelector(".mySwiper3");
  var mySwiper3Slides = mySwiper3.querySelectorAll(".swiper-slide");
  
  for (var i = 0; i < mySwiper3Slides.length; i++) {
    var slide = mySwiper3Slides[i];
    if (slide.getAttribute("data-value") != color) {
      slide.parentElement.removeChild(slide);
    }
  }
</script>












<script>

var originalSlides2 = [];
var originalThumbs2 = [];

  // Save the original slides if they haven't been saved yet
  if (originalSlides2.length === 0) {
    let slides2 = document.querySelectorAll('.mySwiper4-slide');
    for (let slide2 of slides2) {
      originalSlides2.push(slide2.cloneNode(true));
    }
  }

  if (originalThumbs2.length === 0) {
    let thumbs2 = document.querySelectorAll('.mySwiper5-slide');
    for (let thumb2 of thumbs2) {
      originalThumbs2.push(thumb2.cloneNode(true));
    }
  }


  var colorField2 = document.querySelector(".color-metafield");
  var color2 = colorField2.innerText;
  
  var mySwiper4 = document.querySelector(".mySwiper4");
  var mySwiper4Slides = mySwiper4.querySelectorAll(".swiper-slide");
  
  for (var i = 0; i < mySwiper4Slides.length; i++) {
    var slide2 = mySwiper4Slides[i];
    if (slide2.getAttribute("data-value") != color2) {
      slide2.parentElement.removeChild(slide2);
    }
  }

  var mySwiper5 = document.querySelector(".mySwiper5");
  var mySwiper5Slides = mySwiper5.querySelectorAll(".swiper-slide");
  
  for (var i = 0; i < mySwiper5Slides.length; i++) {
    var slide2 = mySwiper5Slides[i];
    if (slide2.getAttribute("data-value") != color2) {
      slide2.parentElement.removeChild(slide2);
    }
  }
</script>





<script>
  var swiper5 = new Swiper(".mySwiper5", {
    slidesPerView: 1,
    watchSlidesProgress: true,
    allowSlideNext: false,
    allowSlidePrev: false
  });
  var swiper4 = new Swiper(".mySwiper4", {
    thumbs: {
      swiper: swiper5
    }
  });

  function handleClick2() {

        // Add the original slides back
        for (let slide2 of originalSlides2) {
          swiper4.appendSlide(slide2);
        }
    
        for (let thumb2 of originalThumbs2) {
          swiper5.appendSlide(thumb2);
        }
  
  
    let parent2 = event.target.parentElement;
    let swatchText2 = parent2.querySelector('.swatch-text-outside');
    let value2 = swatchText2.textContent;
  
    // Remove all current slides
    let currentSlides2 = document.querySelectorAll('.mySwiper4-slide');
    for (let slide2 of currentSlides2) {
      let index2 = Array.prototype.indexOf.call(slide2.parentNode.children, slide2);
      swiper4.removeSlide(index2);
    }
  
    let currentThumbs2 = document.querySelectorAll('.mySwiper5-slide');
    for (let thumb2 of currentThumbs2) {
      let index2 = Array.prototype.indexOf.call(thumb2.parentNode.children, thumb2);
      swiper5.removeSlide(index2);
    }

    // Add the original slides back
    for (let slide2 of originalSlides2) {
      swiper4.appendSlide(slide2);
    }

    for (let thumb2 of originalThumbs2) {
      swiper5.appendSlide(thumb2);
    }
  
    let targetSlide2;
    for (let slide2 of originalSlides2) {
        if (slide2.getAttribute('data-value') == value2) {
            targetSlide2 = slide2;
            break;
        }
    }

    let targetThumb2;
    for (let thumb2 of originalThumbs2) {
        if (thumb2.getAttribute('data-value') == value2) {
            targetThumb2 = thumb2;
            break;
        }
    }
  
    if (targetSlide2) {
        let index2 = Array.prototype.indexOf.call(targetSlide2.parentNode.children, targetSlide2);
        swiper4.slideTo(index2);
    }

    if (targetThumb2) {
      let index2 = Array.prototype.indexOf.call(targetThumb2.parentNode.children, targetThumb2);
      swiper5.slideTo(index2);
  }
  
    // remove all non-active slides after swiper2 is updated
    originalSlides2.forEach(function(slide2) {
      if (slide2.getAttribute('data-value') != value2) {
        let index2 = Array.prototype.indexOf.call(slide2.parentNode.children, slide2);
        swiper4.removeSlide(index2);
      }
    });

    originalThumbs2.forEach(function(thumb2) {
      if (thumb2.getAttribute('data-value') != value2) {
        let index2 = Array.prototype.indexOf.call(thumb2.parentNode.children, thumb2);
        swiper5.removeSlide(index2);
      }
    });
    swiper4.update();
    swiper5.update();
  }
</script>











<script>
  var swiper3 = new Swiper(".mySwiper3", {
    slidesPerView: 1,
    watchSlidesProgress: true,
    allowSlideNext: false,
    allowSlidePrev: false
  });
  var swiper2 = new Swiper(".mySwiper2", {
    thumbs: {
      swiper: swiper3
    }
  });

  function handleClick() {

        // Add the original slides back
        for (let slide of originalSlides) {
          swiper2.appendSlide(slide);
        }
    
        for (let thumb of originalThumbs) {
          swiper3.appendSlide(thumb);
        }
  
  
    let parent = event.target.parentElement;
    let swatchText = parent.querySelector('.swatch-text-outside');
    let value = swatchText.textContent;
  
    // Remove all current slides
    let currentSlides = document.querySelectorAll('.mySwiper2-slide');
    for (let slide of currentSlides) {
      let index = Array.prototype.indexOf.call(slide.parentNode.children, slide);
      swiper2.removeSlide(index);
    }
  
    let currentThumbs = document.querySelectorAll('.mySwiper3-slide');
    for (let thumb of currentThumbs) {
      let index = Array.prototype.indexOf.call(thumb.parentNode.children, thumb);
      swiper3.removeSlide(index);
    }

    // Add the original slides back
    for (let slide of originalSlides) {
      swiper2.appendSlide(slide);
    }

    for (let thumb of originalThumbs) {
      swiper3.appendSlide(thumb);
    }
  
    let targetSlide;
    for (let slide of originalSlides) {
        if (slide.getAttribute('data-value') == value) {
            targetSlide = slide;
            break;
        }
    }

    let targetThumb;
    for (let thumb of originalThumbs) {
        if (thumb.getAttribute('data-value') == value) {
            targetThumb = thumb;
            break;
        }
    }
  
    if (targetSlide) {
        let index = Array.prototype.indexOf.call(targetSlide.parentNode.children, targetSlide);
        swiper2.slideTo(index);
    }

    if (targetThumb) {
      let index = Array.prototype.indexOf.call(targetThumb.parentNode.children, targetThumb);
      swiper3.slideTo(index);
  }
  
    // remove all non-active slides after swiper2 is updated
    originalSlides.forEach(function(slide) {
      if (slide.getAttribute('data-value') != value) {
        let index = Array.prototype.indexOf.call(slide.parentNode.children, slide);
        swiper2.removeSlide(index);
      }
    });

    originalThumbs.forEach(function(thumb) {
      if (thumb.getAttribute('data-value') != value) {
        let index = Array.prototype.indexOf.call(thumb.parentNode.children, thumb);
        swiper3.removeSlide(index);
      }
    });
    swiper2.update();
    swiper3.update();
  }
</script>






<script>

  let upsellProduct = null;{% if product.metafields.custom.product_upsell != blank %}upsellProduct = {{ product.metafields.custom.product_upsell.value | json }};{% endif %}function app() {
    return {
      labelName: '',
      product: {{ product | json }}
    },
    upsold : false,
    currentOptions : {},

    init() {
      this.$watch('variant', () => {
        const variant = this.variant;
        if (! variant || ! variant.featured_image) 
          return;
        



        const imgId = variant.featured_image.id.toString();
        for (let i = 0; i < swiper.slides.length; i++) {
          const slide = swiper.slides[i];
          const slideImgId = slide.getAttribute("img-id");
          if (slideImgId === imgId) {
            swiper.slideTo(i);
            break;
          }
        }
      });

      this.selectFirstAvailableVariant();
    },

    priceToCurr(price) {
      const n = parseInt(price);
      return `€${
        (n / 100).toFixed(2).replace('.', ',')
      }`;
    },

    selectFirstAvailableVariant() {
      let firstVariant;
      for (const variant of this.product.variants) {
        if (variant.available) {
          firstVariant = variant;
          break;
        }
      }

      if (firstVariant) {
        const keys = Object.keys(this.productOptions);
        for (let i = 0; i < keys.length; i++) {
          this.currentOptions[keys[i]] = firstVariant[`option${
              i + 1
            }`];
        }
      }
    },

    submit() {
      const items = [{
          id: this.variant.id,
          quantity: 1
        }];

      if (this.upsold && upsellProduct) {
        items.push({id: upsellProduct.variants[0].id, quantity: 1});
      }

      liquidAjaxCart.cartRequestAdd({items});

      const openClass = 'js-my-cart-open';
      const classList = document.body.classList;
      if (! classList.contains(openClass)) 
        classList.add(openClass);
      



      this.labelName = '';
    },

    get variant() {
      for (const variant of this.product.variants) {
        if (JSON.stringify(Object.values(this.currentOptions).sort()) === JSON.stringify(variant.options.sort())) {
          return variant;
        }
      }

      console.log(null);
      return null;
    },

    get productOptions() {
      return this.product.variants.reduce((prev, curr) => {
        for (let i = 0; i < curr.options.length; i++) {
          if (!prev[this.product.options[i]]) 
            prev[this.product.options[i]] = [];
          



          prev[this.product.options[i]].push(curr[`option${
              i + 1
            }`]);
          prev[this.product.options[i]] = [...new Set(prev[this.product.options[i]])];
        }

        return prev;
      }, {});
    }
  };
}
</script>



<script>


  const colorMap = {
    {% for block in section.blocks %}
      {% if block.type == 'color' %}
        '{{ block.settings.name }}' : '{{ block.settings.code }}',{% endif %}{% endfor %}
  };

  const allProducts = [
    {{ product | json }},{% for p in product.metafields.custom.linked_products.value %}{
        {
          p | json
        }
      },{% endfor %}
  ];

  function app () {
    return {
      allProducts,
      product: allProducts[0],
      upsold: false,
      currentOptions: {},

      init() {
        const swiper = new Swiper('#swiper-                                                                             {{ section.id }}', {
          direction: 'horizontal',
          navigation: {
            nextEl: '#swiper-next',
            prevEl: '#swiper-prev'
          },

          pagination: {
            el: '.swiper-pagination'
          }
        });

        this.$watch('product', () => swiper.update());
        this.$watch('variant', () => {
          const variant = this.variant;
          if (! variant || ! variant.featured_image) 
            return;
          



          const imgSrc = variant.featured_image.src;
          for (let i = 0; i < swiper.slides.length; i++) {
            const slide = swiper.slides[i];
            const img = slide.querySelector('img');
            if (! img) 
              continue;
            



            if (img.getAttribute("src") === imgSrc) {
              swiper.slideTo(i);
              break;
            }
          }
        })
      },

      priceToCurr(price) {
        const n = parseInt(price);
        return `$${
          (n / 100).toFixed(2)
        }`;
      },

      get variant() {
        for (const variant of this.product.variants) {
          if (JSON.stringify(Object.values(this.currentOptions).sort()) === JSON.stringify(variant.options.sort())) {
            return variant;
          }
        }
        return null;
      },

      get productOptions() {
        const x = this.product.variants.reduce((prev, curr) => {
          for (let i = 0; i < curr.options.length; i++) {
            if (!prev[this.product.options[i]]) 
              prev[this.product.options[i]] = [];
            



            prev[this.product.options[i]].push(curr[`option${
                i + 1
              }`]);
            prev[this.product.options[i]] = [...new Set(prev[this.product.options[i]])];
          }

          return prev;
        }, {});

        return x;
      }
    };
  }
</script>





{% schema %}
  {
    "name": "Product Section",
    "tag": "section",
    "class": "products",
    "settings": [],
    "blocks": [
      {
        "type": "title",
        "name": "Title",
        "limit": 1,
        "settings": [
          {
            "type": "text",
            "id": "product-info-text",
            "label": "Product Informatie"
          }
        ]
      },
      {
        "type": "description",
        "name": "Description",
        "limit": 1
      },
      {
        "type": "review",
        "name": "Review",
        "limit": 1,
        "settings": [
          {
            "type": "liquid",
            "id": "review",
            "label": "Review"
          }
        ]
      },
      {
        "type": "price",
        "name": "Price",
        "limit": 1
      }, {
        "type": "color_selector",
        "name": "Color Selector",
        "settings": [
          {
            "type": "url",
            "id": "variant-link",
            "label": "Color Link"
          }, {
            "type": "color",
            "id": "variant-color",
            "label": "Color"
          }, {
            "type": "text",
            "id": "variant-text",
            "label": "Color Text"
          }
        ]
      }, {
        "type": "storage_selector",
        "name": "Storage Selector",
        "settings": [
          {
            "type": "url",
            "id": "storage-link",
            "label": "Storage Link"
          }, {
            "type": "text",
            "id": "storage-text",
            "label": "Color Text"
          }
        ]
      }, {
        "type": "grade_buttons",
        "name": "Grade Buttons",
        "limit": 3,
        "settings": [
          {
            "type": "text",
            "id": "grade-text",
            "label": "Grade Text"
          }, {
            "type": "text",
            "id": "grade-sub-text",
            "label": "Grade Sub Text"
          }, {
            "type": "text",
            "id": "grade-price",
            "label": "Grade Price"
          }, {
            "type": "text",
            "id": "grade-button-label",
            "label": "Grade Button Label"
          }
        ]
      }, {
        "type": "additional-lines",
        "name": "Additional Lines",
        "settings": [
          {
            "type": "url",
            "id": "line-link",
            "label": "Line Link"
          }, {
            "type": "text",
            "id": "line-text",
            "label": "Line Text"
          }
        ]
      }, {
        "type": "accordion-reviews",
        "name": "Accordion Reviews",
        "settings": [
          {
            "type": "text",
            "id": "person-name",
            "label": "Name"
          }, {
            "type": "text",
            "id": "person-city",
            "label": "City"
          }, {
            "type": "richtext",
            "id": "person-description",
            "label": "Review"
          }
        ]
      }, {
        "type": "addition",
        "name": "Box Items",
        "settings": [
          {
            "type": "image_picker",
            "id": "addition-image",
            "label": "Addition Image"
          }
        ]
      }
    ]
  }
{% endschema %}